(function($){var parseQueryString=function(name,str){var regex=new RegExp('[?&]'+name.replace(/[\[\]]/g,'\\$&')+'(=([^&#]*)|&|#|$)');var results=regex.exec('&'+str);return(!results||!results[2]?'':decodeURIComponent(results[2].replace(/\+/g,' ')))}
var observeContentChanges=function(el,onlyAdded,callback){if(typeof MutationObserver!=='undefined'){var observer=new MutationObserver(function(mutations,observer){if(onlyAdded){if(mutations[0].addedNodes.length)
callback()}else{if(mutations[0].addedNodes.length||mutations[0].removedNodes.length)
callback()}});observer.observe(el,{childList:!0,subtree:!0})}};$(function(){initPlugin()});$(document).on(rlArgs.customEvents,function(){initPlugin()});function initPlugin(){var containers=[];$('.rl-gallery-container').each(function(){var container=$(this);if(container.hasClass('rl-pagination-infinite'))
containers.push(container);else container.removeClass('rl-loading')});if(containers.length>0){var infArgs=[];for(var i=0;i<containers.length;i++){var container=containers[i];var gallery=container.find('.rl-gallery');var galleryId=parseInt(container.data('gallery_id'));var galleryScrollType=container.find('.rl-pagination-bottom').data('button');var galleryButton=typeof galleryScrollType!=='undefined'&&galleryScrollType==='manually';infArgs[i]={container:container,gallery:gallery,galleryId:galleryId,galleryButton:galleryButton};infArgs[i].gallery.infiniteScroll({path:'.rl-gallery-container[data-gallery_id="'+infArgs[i].galleryId+'"] .rl-pagination-bottom .next',append:'.rl-gallery-container[data-gallery_id="'+infArgs[i].galleryId+'"] .rl-gallery-item',status:!1,hideNav:'.rl-gallery-container[data-gallery_id="'+infArgs[i].galleryId+'"] .rl-pagination-bottom',prefill:!infArgs[i].galleryButton,loadOnScroll:!0,scrollThreshold:infArgs[i].galleryButton?!1:400,button:infArgs[i].galleryButton?'.rl-gallery-container[data-gallery_id="'+infArgs[i].galleryId+'"] .rl-load-more':!1,debug:!1,history:!1,responseBody:'text',onInit:function(){var args=infArgs[i];if(args.container.hasClass('rl-pagination-infinite')&&args.galleryButton){args.container.removeClass('rl-loading')}
this.on('request',function(){args.container.addClass('rl-loading')});this.on('append',function(body,path,items,response){args.container.removeClass('rl-loading');$.event.trigger({type:'doResponsiveLightbox',script:rlArgs.script,selector:rlArgs.selector,args:rlArgs,pagination_type:'infinite',gallery_id:args.galleryId,masonry:args.gallery.hasClass('rl-masonry-gallery')||args.gallery.hasClass('rl-basicmasonry-gallery'),delayLightbox:args.gallery.hasClass('rl-expander-gallery'),infinite:{gallery:args.gallery,body:body,items:items,response:response}})})}})}}
$.event.trigger({type:'doResponsiveLightbox',script:rlArgs.script,selector:rlArgs.selector,args:rlArgs})}
$(document).on('click','.rl-pagination a.page-numbers',function(e){var link=$(this);var container=link.closest('.rl-gallery-container');if(container.hasClass('rl-pagination-ajax')){e.preventDefault();e.stopPropagation();var galleryId=container.data('gallery_id');var galleryNo=container.find('.rl-gallery').data('gallery_no');container.addClass('rl-loading');$.post(rlArgs.ajaxurl,{action:'rl-get-gallery-page-content',gallery_id:galleryId,gallery_no:galleryNo,post_id:rlArgs.postId,page:parseQueryString('rl_page',link.prop('href')),nonce:rlArgs.nonce,preview:rlArgs.preview,lightbox:rlArgs.script}).done(function(response){container.replaceWith($(response).removeClass('rl-loading'));$.event.trigger({type:'doResponsiveLightbox',script:rlArgs.script,selector:rlArgs.selector,args:rlArgs,pagination_type:'ajax',gallery_id:galleryId,gallery_no:galleryNo})}).always(function(){container.removeClass('rl-loading')});return!1}});$(document).on('doResponsiveLightbox',function(event){if(typeof event.masonry!=='undefined'&&event.masonry===!0)
return!1;var script=event.script;var selector=event.selector;if(typeof script==='undefined'||typeof selector==='undefined')
return!1;var args=event.args;var delayLightbox=!1;if(typeof event.delayLightbox!=='undefined'&&event.delayLightbox===!0)
delayLightbox=!0;rl_view_image=function(script,url){$.event.trigger({type:'doLightboxViewImage',script:script,url:url})}
rl_hide_image=function(script,url){$.event.trigger({type:'doLightboxHideImage',script:script,url:url})}
setTimeout(function(){var flex=$('.flex-viewport');if(args.woocommerce_gallery==='1'){var gallery=$('.woocommerce-product-gallery');if(gallery.find('.woocommerce-product-gallery__trigger').length===0){gallery.prepend('<a href="#" class="woocommerce-product-gallery__trigger">üîç</a>');gallery.on('click','.woocommerce-product-gallery__trigger',function(e){e.preventDefault();e.stopPropagation();if(script==='lightgallery'){if(flex.length){var image=flex.find('.flex-active-slide a[data-rel] img');var linkId=flex.find('.flex-active-slide a[data-rel]').data('lg-id');image.trigger('click.lgcustom-item-'+linkId)}else{var link=gallery.find('a[data-rel]').first();var image=link.find('img');image.trigger('click.lgcustom-item-'+link.data('lg-id'))}}else if(script==='fancybox_pro'){if(flex.length){var index=flex.find('.flex-active-slide').index();var imageId=flex.find('.flex-active-slide a[data-rel]').data('fancybox');Fancybox.fromOpener('[data-fancybox="'+imageId+'"]',{startIndex:index})}else{var link=gallery.find('a[data-rel]').first();Fancybox.fromOpener('[data-fancybox="'+link.data('fancybox')+'"]',{startIndex:0})}}else{if(flex.length)
flex.find('.flex-active-slide a[data-rel]').trigger('click');else gallery.find('a[data-rel]').first().trigger('click')}})}}},10);if(delayLightbox){setTimeout(function(){initLightbox(event)},0)}else initLightbox(event)});function initLightbox(event){var script=event.script;var selector=event.selector;var args=event.args;switch(script){case 'swipebox':var slide=$('#swipebox-overlay').find('.slide.current');var imageSource='';var allowHide=!1;var closeExecuted=!1;$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').swipebox({useCSS:(args.animation==='1'?!0:!1),useSVG:(args.useSVG==='1'?!0:!1),hideCloseButtonOnMobile:(args.hideCloseButtonOnMobile==='1'?!0:!1),removeBarsOnMobile:(args.removeBarsOnMobile==='1'?!0:!1),hideBarsDelay:(args.hideBars==='1'?parseInt(args.hideBarsDelay):0),videoMaxWidth:parseInt(args.videoMaxWidth),loopAtEnd:(args.loopAtEnd==='1'?!0:!1),afterOpen:function(){closeExecuted=!1;slide=$('#swipebox-overlay').find('.slide.current');var image=slide.find('img').attr('src');if(typeof image!=='undefined'){imageSource=image;rl_view_image(script,imageSource)}else imageSource='';observeContentChanges(document.getElementById('swipebox-slider'),!1,function(){if(imageSource===''){var image=slide.find('img').attr('src');if(typeof image!=='undefined'){imageSource=image;rl_view_image(script,imageSource)}else imageSource=''}})},nextSlide:function(){slide=$('#swipebox-overlay').find('.slide.current');var image=slide.find('img').attr('src');if(typeof image!=='undefined'){imageSource=image;rl_view_image(script,imageSource)}else imageSource=''},prevSlide:function(){slide=$('#swipebox-overlay').find('.slide.current');var image=slide.find('img').attr('src');if(typeof image!=='undefined'){imageSource=image;rl_view_image(script,imageSource)}else imageSource=''},afterClose:function(){closeExecuted=!0;if(allowHide){rl_hide_image(script,imageSource);allowHide=!1}}});$(window).on('resize',function(){if(!closeExecuted){allowHide=!0}});break;case 'prettyphoto':var viewDisabled=!1;var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').each(function(){var el=$(this);var title=el.data('rl_title');var caption=el.data('rl_caption');if(!title)
title='';if(!caption)
caption='';el.attr('title',caption);el.find('img').attr('alt',title)});$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').prettyPhoto({hook:'data-rel',animation_speed:args.animationSpeed,slideshow:(args.slideshow==='1'?parseInt(args.slideshowDelay):!1),autoplay_slideshow:(args.slideshowAutoplay==='1'?!0:!1),opacity:args.opacity,show_title:(args.showTitle==='1'?!0:!1),allow_resize:(args.allowResize==='1'?!0:!1),allow_expand:(args.allowExpand==='1'?!0:!1),default_width:parseInt(args.width),default_height:parseInt(args.height),counter_separator_label:args.separator,theme:args.theme,horizontal_padding:parseInt(args.horizontalPadding),hideflash:(args.hideFlash==='1'?!0:!1),wmode:args.wmode,autoplay:(args.videoAutoplay==='1'?!0:!1),modal:(args.modal==='1'?!0:!1),deeplinking:(args.deeplinking==='1'?!0:!1),overlay_gallery:(args.overlayGallery==='1'?!0:!1),keyboard_shortcuts:(args.keyboardShortcuts==='1'?!0:!1),social_tools:(args.social==='1'?'<div class="pp_social"><div class="twitter"><a href="//twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href='+location.href+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div></div>':''),ie6_fallback:!0,changepicturecallback:function(){if(viewDisabled){viewDisabled=!1;return}
lastImage=$('#pp_full_res').find('img').attr('src');rl_view_image(script,lastImage);if(args.allowExpand==='1'){$('a.pp_expand').on('click',function(){viewDisabled=!0})}},callback:function(){rl_hide_image(script,lastImage)}});break;case 'fancybox':var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').fancybox({modal:(args.modal==='1'?!0:!1),overlayShow:(args.showOverlay==='1'?!0:!1),showCloseButton:(args.showCloseButton==='1'?!0:!1),enableEscapeButton:(args.enableEscapeButton==='1'?!0:!1),hideOnOverlayClick:(args.hideOnOverlayClick==='1'?!0:!1),hideOnContentClick:(args.hideOnContentClick==='1'?!0:!1),cyclic:(args.cyclic==='1'?!0:!1),showNavArrows:(args.showNavArrows==='1'?!0:!1),autoScale:(args.autoScale==='1'?!0:!1),scrolling:args.scrolling,centerOnScroll:(args.centerOnScroll==='1'?!0:!1),opacity:(args.opacity==='1'?!0:!1),overlayOpacity:parseFloat(args.overlayOpacity/100),overlayColor:args.overlayColor,titleShow:(args.titleShow==='1'?!0:!1),titlePosition:args.titlePosition,transitionIn:args.transitions,transitionOut:args.transitions,easingIn:args.easings,easingOut:args.easings,speedIn:parseInt(args.speeds),speedOut:parseInt(args.speeds),changeSpeed:parseInt(args.changeSpeed),changeFade:parseInt(args.changeFade),padding:parseInt(args.padding),margin:parseInt(args.margin),width:parseInt(args.videoWidth),height:parseInt(args.videoHeight),onComplete:function(){lastImage=$('#fancybox-content').find('img').attr('src');rl_view_image(script,lastImage)},onClosed:function(){rl_hide_image(script,lastImage)}});break;case 'nivo':$.each($('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]'),function(){var attr=$(this).attr('data-rel');if(typeof attr==='undefined'||attr==!1){attr=$(this).attr('rel')}
if(typeof attr!=='undefined'&&attr!==!1){var match=attr.match(new RegExp(selector+'\\-(gallery\\-(?:[\\da-z]{1,4}))','ig'));if(match!==null)
$(this).attr('data-lightbox-gallery',match[0])}});var observerInitialized=!1;var changeAllowed=!0;var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').nivoLightbox({effect:args.effect,clickOverlayToClose:(args.clickOverlayToClose==='1'?!0:!1),keyboardNav:(args.keyboardNav==='1'?!0:!1),errorMessage:args.errorMessage,afterShowLightbox:function(lightbox){var content=$(lightbox)[0].find('.nivo-lightbox-content');if(!observerInitialized){observerInitialized=!0;observeContentChanges(document.getElementsByClassName('nivo-lightbox-content')[0],!0,function(){if(changeAllowed){lastImage=content.find('.nivo-lightbox-image img').attr('src');rl_view_image(script,lastImage);changeAllowed=!1}})}},afterHideLightbox:function(){changeAllowed=!0;rl_hide_image(script,lastImage)},onPrev:function(element){changeAllowed=!1;lastImage=element[0].attr('href');rl_view_image(script,lastImage)},onNext:function(element){changeAllowed=!1;lastImage=element[0].attr('href');rl_view_image(script,lastImage)}});break;case 'imagelightbox':var selectors=[];var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').each(function(i,item){var attr=$(item).attr('data-rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr);else{attr=$(item).attr('rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr)}});if(selectors.length>0){selectors=_.uniq(selectors);$(selectors).each(function(i,item){if(typeof event.pagination_type!=='undefined'){$('a[data-rel="'+item+'"], a[rel="'+item+'"]').each(function(){$(this).off('click.imageLightbox')})}
$('a[data-rel="'+item+'"], a[rel="'+item+'"]').imageLightbox({animationSpeed:parseInt(args.animationSpeed),preloadNext:(args.preloadNext==='1'?!0:!1),enableKeyboard:(args.enableKeyboard==='1'?!0:!1),quitOnEnd:(args.quitOnEnd==='1'?!0:!1),quitOnImgClick:(args.quitOnImageClick==='1'?!0:!1),quitOnDocClick:(args.quitOnDocumentClick==='1'?!0:!1),onLoadEnd:function(){lastImage=$('#imagelightbox').attr('src');rl_view_image(script,lastImage)},onEnd:function(){rl_hide_image(script,lastImage)}})})}
break;case 'tosrus':var selectors=[];var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').each(function(i,item){var attr=$(item).attr('data-rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr);else{attr=$(item).attr('rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr)}});if(selectors.length>0){selectors=_.uniq(selectors);$(selectors).each(function(i,item){if(typeof event.pagination_type!=='undefined'){$('body').find('.tosrus-'+item).remove();$('a[data-rel="'+item+'"], a[rel="'+item+'"]').each(function(){$(this).off('click.tos')})}
var tos=$('a[data-rel="'+item+'"], a[rel="'+item+'"]').tosrus({infinite:(args.infinite==='1'?!0:!1),autoplay:{play:(args.autoplay==='1'?!0:!1),pauseOnHover:(args.pauseOnHover==='1'?!0:!1),timeout:args.timeout},effect:args.effect,keys:{prev:(args.keys==='1'?!0:!1),next:(args.keys==='1'?!0:!1),close:(args.keys==='1'?!0:!1)},pagination:{add:(args.pagination==='1'?!0:!1),type:args.paginationType},show:!1,buttons:!0,caption:{add:!0,attributes:["title"]},wrapper:{classes:'tosrus-'+item,onClick:args.closeOnClick==='1'?'close':'toggleUI'}});tos.on('sliding.tos',function(event,number){lastImage=$($(event.target).find('.tos-slider .tos-slide')[number]).find('img').attr('src');rl_view_image(script,lastImage)});tos.on('closing.tos',function(){rl_hide_image(script,lastImage)})})}
break;case 'featherlight':var selectors=[];var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').each(function(i,item){var attr=$(item).attr('data-rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr);else{attr=$(item).attr('rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr)}});if(selectors.length>0){selectors=_.uniq(selectors);$.extend($.featherlight.defaults,{openSpeed:parseInt(args.openSpeed),closeSpeed:parseInt(args.closeSpeed),closeOnClick:args.closeOnClick,closeOnEsc:(args.closeOnEsc==='1'?!0:!1),afterOpen:function(event){lastImage=event.currentTarget.href;rl_view_image(script,lastImage)},afterClose:function(){rl_hide_image(script,lastImage)}});$(selectors).each(function(i,item){if(typeof event.pagination_type!=='undefined'){$('a[data-rel="'+item+'"], a[rel="'+item+'"]').each(function(){$(this).off('click.featherlight')})}
if(/-gallery-/.test(item)){$('a[data-rel="'+item+'"], a[rel="'+item+'"]').featherlightGallery({galleryFadeIn:parseInt(args.galleryFadeIn),galleryFadeOut:parseInt(args.galleryFadeOut),previousIcon:'&#10094;',nextIcon:'&#10095;'})}else if(/-video-/.test(item)){$('a[data-rel="'+item+'"], a[rel="'+item+'"]').featherlight()}else{$('a[data-rel="'+item+'"], a[rel="'+item+'"]').featherlight()}})}
break;case 'magnific':var selectors=[];var lastImage='';$('a[rel*="'+selector+'"], a[data-rel*="'+selector+'"]').each(function(i,item){var attr=$(item).attr('data-rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr);else{attr=$(item).attr('rel');if(typeof attr!=='undefined'&&attr!==!1&&attr!=='norl')
selectors.push(attr)}});if(selectors.length>0){selectors=_.uniq(selectors);$(selectors).each(function(i,item){var subselector=$('a[data-rel="'+item+'"], a[rel="'+item+'"]');var element=$(subselector[0]);var media_type=element.data('magnific_type');var content_type=element.data('rl_content');if(typeof content_type!=='undefined')
media_type=content_type;if(typeof media_type==='undefined')
media_type='image';subselector.magnificPopup({type:media_type==='gallery'?'image':(media_type==='video'?'iframe':media_type),disableOn:args.disableOn,midClick:args.midClick==='1',preloader:args.preloader==='1',closeOnContentClick:args.closeOnContentClick==='1',closeOnBgClick:args.closeOnBgClick==='1',closeBtnInside:args.closeBtnInside==='1',showCloseBtn:args.showCloseBtn==='1',enableEscapeKey:args.enableEscapeKey==='1',alignTop:args.alignTop==='1',autoFocusLast:args.autoFocusLast==='1',fixedContentPos:args.fixedContentPos==='auto'?'auto':(args.fixedContentPos==='1'),fixedBgPos:args.fixedBgPos==='auto'?'auto':(args.fixedBgPos==='1'),image:{titleSrc:function(item){var title=item.el.data('rl_title');var caption=item.el.data('rl_caption');if(!title)
title='';if(!caption)
caption='';return title+'<small>'+caption+'</small>'}},gallery:{enabled:subselector.length>1&&media_type==='gallery',navigateByImgClick:!0,preload:[0,1]},callbacks:{close:function(){rl_hide_image(script,this.currItem.src)},imageLoadComplete:function(){rl_view_image(script,this.currItem.src)}}})})}
break}}})(jQuery)